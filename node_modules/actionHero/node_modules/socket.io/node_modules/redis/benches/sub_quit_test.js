if (process.env.REDISTOGO_URL) {
	var rtg   = require("url").parse(process.env.REDISTOGO_URL);
	var client = require("redis").createClient(rtg.port, rtg.hostname);
	var client2 = require("redis").createClient(rtg.port, rtg.hostname);
	client.auth(rtg.auth.split(":")[1]);
	client2.auth(rtg.auth.split(":")[1]);
} else {

	var client = require("redis").createClient();
	var client2 = require("redis").createClient();
}
client.subscribe("something");
client.on("subscribe", function (channel, count) {
    console.log("Got sub: " + channel);
    client.unsubscribe("something");
});

client.on("unsubscribe", function (channel, count) {
    console.log("Got unsub: " + channel + ", quitting");
    client.quit();
});

// exercise unsub before sub
client2.unsubscribe("something");
client2.subscribe("another thing");
client2.quit();
